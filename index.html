<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- App Icons for iOS -->
    <link rel="apple-touch-icon" sizes="180x180" href="data:image/svg+xml,%3Csvg width='180' height='180' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='50' cy='50' r='48' fill='%23C41E3A' stroke='white' stroke-width='3'/%3E%3Crect x='25' y='47' width='50' height='6' fill='white' rx='1'/%3E%3Crect x='22' y='42' width='6' height='16' fill='white' rx='2'/%3E%3Crect x='72' y='42' width='6' height='16' fill='white' rx='2'/%3E%3Cpath d='M 35 65 Q 40 62 45 65 Q 50 68 55 65 Q 60 62 65 65' stroke='white' stroke-width='3' fill='none' stroke-linecap='round'/%3E%3Cpath d='M 38 70 Q 43 67 48 70 Q 53 73 58 70' stroke='white' stroke-width='2.5' fill='none' stroke-linecap='round' opacity='0.8'/%3E%3Cpath d='M 30 35 L 70 35' stroke='white' stroke-width='3' stroke-linecap='round'/%3E%3Ccircle cx='30' cy='35' r='3' fill='white'/%3E%3Ccircle cx='70' cy='35' r='3' fill='white'/%3E%3C/svg%3E">
    <link rel="apple-touch-icon" sizes="152x152" href="data:image/svg+xml,%3Csvg width='152' height='152' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='50' cy='50' r='48' fill='%23C41E3A' stroke='white' stroke-width='3'/%3E%3Crect x='25' y='47' width='50' height='6' fill='white' rx='1'/%3E%3Crect x='22' y='42' width='6' height='16' fill='white' rx='2'/%3E%3Crect x='72' y='42' width='6' height='16' fill='white' rx='2'/%3E%3Cpath d='M 35 65 Q 40 62 45 65 Q 50 68 55 65 Q 60 62 65 65' stroke='white' stroke-width='3' fill='none' stroke-linecap='round'/%3E%3Cpath d='M 38 70 Q 43 67 48 70 Q 53 73 58 70' stroke='white' stroke-width='2.5' fill='none' stroke-linecap='round' opacity='0.8'/%3E%3Cpath d='M 30 35 L 70 35' stroke='white' stroke-width='3' stroke-linecap='round'/%3E%3Ccircle cx='30' cy='35' r='3' fill='white'/%3E%3Ccircle cx='70' cy='35' r='3' fill='white'/%3E%3C/svg%3E">
    <link rel="apple-touch-icon" sizes="120x120" href="data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='50' cy='50' r='48' fill='%23C41E3A' stroke='white' stroke-width='3'/%3E%3Crect x='25' y='47' width='50' height='6' fill='white' rx='1'/%3E%3Crect x='22' y='42' width='6' height='16' fill='white' rx='2'/%3E%3Crect x='72' y='42' width='6' height='16' fill='white' rx='2'/%3E%3Cpath d='M 35 65 Q 40 62 45 65 Q 50 68 55 65 Q 60 62 65 65' stroke='white' stroke-width='3' fill='none' stroke-linecap='round'/%3E%3Cpath d='M 38 70 Q 43 67 48 70 Q 53 73 58 70' stroke='white' stroke-width='2.5' fill='none' stroke-linecap='round' opacity='0.8'/%3E%3Cpath d='M 30 35 L 70 35' stroke='white' stroke-width='3' stroke-linecap='round'/%3E%3Ccircle cx='30' cy='35' r='3' fill='white'/%3E%3Ccircle cx='70' cy='35' r='3' fill='white'/%3E%3C/svg%3E">
    
    <!-- Standard favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg width='32' height='32' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='50' cy='50' r='48' fill='%23C41E3A' stroke='white' stroke-width='3'/%3E%3Crect x='25' y='47' width='50' height='6' fill='white' rx='1'/%3E%3Crect x='22' y='42' width='6' height='16' fill='white' rx='2'/%3E%3Crect x='72' y='42' width='6' height='16' fill='white' rx='2'/%3E%3Cpath d='M 35 65 Q 40 62 45 65 Q 50 68 55 65 Q 60 62 65 65' stroke='white' stroke-width='3' fill='none' stroke-linecap='round'/%3E%3Cpath d='M 38 70 Q 43 67 48 70 Q 53 73 58 70' stroke='white' stroke-width='2.5' fill='none' stroke-linecap='round' opacity='0.8'/%3E%3Cpath d='M 30 35 L 70 35' stroke='white' stroke-width='3' stroke-linecap='round'/%3E%3Ccircle cx='30' cy='35' r='3' fill='white'/%3E%3Ccircle cx='70' cy='35' r='3' fill='white'/%3E%3C/svg%3E">
    
    <!-- App Title -->
    <meta name="apple-mobile-web-app-title" content="Training">
    
    <title>6-Week Concurrent Training Program</title>
    <style>
        :root {
            --color-bg-primary: #ffffff;
            --color-bg-secondary: #f8f9fa;
            --color-bg-elevated: #ffffff;
            --color-text-primary: #1a1a1a;
            --color-text-secondary: #4a4a4a;
            --color-text-muted: #6b7280;
            --color-accent: #C41E3A;
            --color-accent-hover: #a01830;
            --color-success: #008000;
            --color-warning: #f59e0b;
            --space-xs: 0.25rem;
            --space-sm: 0.5rem;
            --space-md: 1rem;
            --space-lg: 1.5rem;
            --space-xl: 2rem;
            --space-2xl: 3rem;
            --radius-sm: 6px;
            --radius: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.07);
            --shadow-lg: 0 10px 15px rgba(0,0,0,0.1);
            --transition-fast: 150ms ease;
            --transition-base: 250ms ease;
        }

        @media (prefers-color-scheme: light) {
            :root {
                --color-bg-primary: #ffffff;
                --color-bg-secondary: #f1f5f9;
                --color-bg-elevated: #ffffff;
                --color-text-primary: #0f172a;
                --color-text-secondary: #475569;
                --color-text-muted: #64748b;
                --color-accent: #C41E3A;
                --color-accent-hover: #a01830;
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', sans-serif;
            background: var(--color-bg-primary);
            color: var(--color-text-primary);
            line-height: 1.6;
            padding-bottom: 80px;
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .header {
            position: relative;
            height: 300px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .hero-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }

        .upload-toggle {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(196, 30, 58, 0.3);
            color: var(--color-accent);
            border: 1px solid rgba(196, 30, 58, 0.5);
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
            z-index: 10;
        }

        .upload-toggle:hover {
            background: rgba(196, 30, 58, 0.5);
        }

        .week-selector {
            position: absolute;
            bottom: 1rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 5;
        }

        .week-indicator {
            text-align: center;
            font-size: 1.75rem;
            font-weight: 700;
            color: #C41E3A;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
            padding: 0.75rem 1.5rem;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 8px;
            backdrop-filter: blur(8px);
        }

        .swipe-hint {
            display: none;
        }

        .day-selector {
            display: flex;
            gap: var(--space-sm);
            overflow-x: auto;
            padding: var(--space-md);
            background: var(--color-bg-secondary);
            -webkit-overflow-scrolling: touch;
        }

        .day-btn {
            flex: 1;
            min-width: 100px;
            padding: var(--space-lg);
            background: var(--color-bg-elevated);
            color: var(--color-text-primary);
            border: 2px solid #e5e7eb;
            border-radius: var(--radius-lg);
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all var(--transition-base);
            text-align: center;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            box-shadow: var(--shadow-sm);
            position: relative;
        }

        .day-btn:hover {
            border-color: var(--color-accent);
            border-width: 3px;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .day-btn:active {
            transform: translateY(0);
            box-shadow: var(--shadow-sm);
        }

        .day-btn.active {
            background: linear-gradient(135deg, rgba(196, 30, 58, 0.05) 0%, rgba(196, 30, 58, 0.02) 100%);
            color: var(--color-text-primary);
            border-color: var(--color-accent);
            border-width: 3px;
            box-shadow: 0 4px 12px rgba(196, 30, 58, 0.25);
        }

        .day-btn.completed::after {
            content: '‚úì';
            position: absolute;
            top: 4px;
            right: 8px;
            color: var(--color-success);
            font-size: 1.2rem;
            font-weight: bold;
        }

        .content {
            padding: var(--space-lg);
            max-width: 800px;
            margin: 0 auto;
        }

        .workout-section {
            background: #ffffff;
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin-bottom: var(--space-xl);
            border-left: 4px solid var(--color-accent);
            box-shadow: var(--shadow-md);
            transition: box-shadow var(--transition-base);
        }

        .workout-section:hover {
            box-shadow: var(--shadow-lg);
        }

        .workout-section h2 {
            color: var(--color-accent);
            font-size: 1.35rem;
            font-weight: 700;
            margin-bottom: var(--space-lg);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            letter-spacing: -0.02em;
        }

        .workout-section h3 {
            color: var(--color-text-primary);
            font-size: 1.1rem;
            margin-top: var(--space-lg);
            margin-bottom: var(--space-sm);
        }

        .exercise-item {
            background: linear-gradient(135deg, #fafafa 0%, #ffffff 100%);
            padding: var(--space-lg);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-lg);
            border: 1px solid #f0f0f0;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-base);
        }

        .exercise-item:hover {
            border-color: rgba(196, 30, 58, 0.2);
            box-shadow: var(--shadow-md);
            transform: translateY(-1px);
        }

        .exercise-header {
            font-weight: 700;
            font-size: 1.05rem;
            color: var(--color-text-primary);
            margin-bottom: var(--space-md);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .exercise-header::before {
            content: '‚óè';
            color: var(--color-accent);
            font-size: 0.6rem;
        }

        .exercise-details {
            color: var(--color-text-secondary);
            font-size: 0.95rem;
            line-height: 1.9;
            padding-left: var(--space-md);
        }

        .main-lift-table {
            width: 100%;
            background: var(--color-bg-elevated);
            border-radius: var(--radius-lg);
            overflow: hidden;
            margin: var(--space-lg) 0;
            box-shadow: var(--shadow-md);
            border: 1px solid #e5e7eb;
        }

        .main-lift-table th,
        .main-lift-table td {
            padding: var(--space-lg);
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
            font-size: 0.95rem;
        }

        .main-lift-table th {
            background: linear-gradient(135deg, var(--color-accent) 0%, #a01830 100%);
            color: white;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 0.05em;
        }

        .main-lift-table tr:last-child td {
            border-bottom: none;
        }

        .highlight {
            background: linear-gradient(135deg, rgba(196, 30, 58, 0.95) 0%, rgba(160, 24, 48, 0.95) 100%);
            color: white;
            font-weight: 700;
            font-size: 1.05rem;
        }

        .highlight td {
            padding: var(--space-xl);
        }

        .tempo-note {
            background: linear-gradient(135deg, #fffbf0 0%, #ffffff 100%);
            padding: var(--space-lg);
            border-radius: var(--radius-lg);
            margin: var(--space-lg) 0;
            border-left: 4px solid var(--color-warning);
            font-size: 0.9rem;
            line-height: 1.8;
            color: var(--color-text-secondary);
            box-shadow: var(--shadow-sm);
        }

        .tempo-note strong {
            color: var(--color-text-primary);
            font-weight: 700;
        }

        .bullet-list {
            margin-left: var(--space-lg);
            color: var(--color-text-secondary);
        }

        .bullet-list li {
            margin-bottom: var(--space-sm);
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            background: var(--color-accent);
            color: var(--color-bg-primary);
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: var(--space-sm);
        }

        .rest-day {
            text-align: center;
            padding: var(--space-xl);
            background: var(--color-bg-secondary);
            border-radius: var(--radius);
            border: 2px dashed var(--color-accent);
        }

        .rest-day h2 {
            color: var(--color-accent);
            font-size: 1.5rem;
            margin-bottom: var(--space-md);
        }

        .hidden {
            display: none;
        }

        .complete-workout-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            padding: var(--space-md) var(--space-xl);
            background: transparent;
            color: var(--color-success);
            border: 2px solid var(--color-success);
            border-radius: var(--radius-lg);
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: var(--space-xl);
            transition: all var(--transition-base);
            box-shadow: var(--shadow-sm);
            min-width: 200px;
        }

        .complete-workout-btn:hover {
            background: rgba(0, 128, 0, 0.08);
            border-width: 3px;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .complete-workout-btn:active {
            transform: translateY(0);
            box-shadow: var(--shadow-sm);
        }

        .complete-workout-btn.completed {
            background: var(--color-success);
            color: white;
            cursor: default;
            box-shadow: 0 4px 12px rgba(0, 128, 0, 0.3);
        }

        .complete-workout-btn.completed:hover {
            background: var(--color-success);
            transform: none;
        }

        .upload-section {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .upload-section.active {
            display: flex;
        }

        .upload-modal {
            background: var(--color-bg-primary);
            border-radius: var(--radius);
            padding: var(--space-xl);
            max-width: 400px;
            width: 90%;
            text-align: center;
            position: relative;
        }

        .upload-close {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--color-text-muted);
        }

        .upload-btn {
            display: inline-block;
            padding: var(--space-md) var(--space-xl);
            background: var(--color-accent);
            color: white;
            border: none;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            margin-top: var(--space-md);
        }

        .upload-btn:hover {
            background: var(--color-accent-hover);
        }

        .main-lift-table {
            width: 100%;
            background: var(--color-bg-elevated);
            border-radius: var(--radius);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin: var(--space-md) 0;
            border: 1px solid #e5e7eb;
        }

        /* Logo responsive styles */
        @media (max-width: 640px) {
            .header svg {
                width: 50px;
                height: 50px;
            }
        }

        /* Mobile-first responsive enhancements */
        @media (max-width: 640px) {
            :root {
                --space-lg: 1rem;
                --space-xl: 1.25rem;
                --space-2xl: 1.5rem;
            }

            .header h1 {
                font-size: 1.25rem;
            }

            .week-indicator {
                font-size: 1.35rem;
                padding: 0.5rem 1rem;
            }

            .content {
                padding: var(--space-md);
            }

            .workout-section {
                padding: var(--space-lg);
                margin-bottom: var(--space-lg);
            }

            .workout-section h2 {
                font-size: 1.15rem;
            }

            .day-btn {
                min-width: 70px;
                padding: var(--space-md);
                font-size: 0.85rem;
            }

            .exercise-item {
                padding: var(--space-md);
            }

            .exercise-header {
                font-size: 0.95rem;
            }

            .exercise-details {
                font-size: 0.9rem;
            }

            .main-lift-table {
                display: block;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .main-lift-table table {
                min-width: 500px;
            }

            .main-lift-table th,
            .main-lift-table td {
                padding: var(--space-md);
                font-size: 0.85rem;
            }

            .complete-workout-btn {
                width: 100%;
                padding: var(--space-lg);
            }
        }

        /* Tablet optimization */
        @media (min-width: 641px) and (max-width: 1024px) {
            .content {
                max-width: 700px;
            }

            .day-btn {
                min-width: 90px;
            }
        }

        /* Large screen optimization */
        @media (min-width: 1025px) {
            .content {
                max-width: 900px;
            }

            .workout-section {
                padding: var(--space-2xl);
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <img src="https://agi-prod-file-upload-public-main-use1.s3.amazonaws.com/dba2d231-262b-41a9-8ea6-8e1246f7acc5" alt="Training Hero" class="hero-image">
        
        <!-- Custom SVG Logo -->
        <div style="position: absolute; top: 1rem; left: 1rem; z-index: 10;">
            <svg width="60" height="60" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <!-- Circular background -->
                <circle cx="50" cy="50" r="48" fill="#C41E3A" stroke="white" stroke-width="3"/>
                
                <!-- Barbell -->
                <rect x="25" y="47" width="50" height="6" fill="white" rx="1"/>
                <rect x="22" y="42" width="6" height="16" fill="white" rx="2"/>
                <rect x="72" y="42" width="6" height="16" fill="white" rx="2"/>
                
                <!-- Running shoe/wing element -->
                <path d="M 35 65 Q 40 62 45 65 Q 50 68 55 65 Q 60 62 65 65" 
                      stroke="white" stroke-width="3" fill="none" stroke-linecap="round"/>
                <path d="M 38 70 Q 43 67 48 70 Q 53 73 58 70" 
                      stroke="white" stroke-width="2.5" fill="none" stroke-linecap="round" opacity="0.8"/>
                
                <!-- Dynamic accent line -->
                <path d="M 30 35 L 70 35" stroke="white" stroke-width="3" stroke-linecap="round"/>
                <circle cx="30" cy="35" r="3" fill="white"/>
                <circle cx="70" cy="35" r="3" fill="white"/>
            </svg>
        </div>
        
        <button class="upload-toggle" onclick="toggleUploadModal()">‚öôÔ∏è</button>
        <div class="week-selector" id="weekSelector">
            <div class="week-indicator" id="weekIndicator">Volume accumulation</div>
        </div>
    </div>

    <div class="upload-section" id="uploadModal">
        <div class="upload-modal">
            <button class="upload-close" onclick="toggleUploadModal()">√ó</button>
            <p style="margin-bottom: 0.5rem; color: var(--color-text-secondary);">Load New Program</p>
            <input type="file" id="programUpload" accept=".json" style="display: none;">
            <button class="upload-btn" onclick="document.getElementById('programUpload').click()">üìÅ Upload JSON Program</button>
        </div>
    </div>

    <div class="day-selector" id="daySelector"></div>

    <div class="content" id="content"></div>

    <script>
        console.log('Script loading...');
        
        const programData = {
            weeks: [
                { num: 1, load: '75-78%', sets: '4√ó6', tempo: '3010', rest: '2-3min', focus: 'Volume accumulation' },
                { num: 2, load: '78-82%', sets: '5√ó5', tempo: '3010', rest: '2-3min', focus: 'Volume + intensity' },
                { num: 3, load: '82-85%', sets: '4√ó4', tempo: '3110', rest: '3min', focus: 'Intensification' },
                { num: 4, load: '85-88%', sets: '4√ó3', tempo: '3110', rest: '3-4min', focus: 'Heavy strength' },
                { num: 5, load: '88-92%', sets: '5√ó2', tempo: '31X0', rest: '4-5min', focus: 'Max strength peak' },
                { num: 6, load: '50-60%', sets: '3√ó5', tempo: '3010', rest: '2min', focus: 'Deload' }
            ],
            days: {
                1: {
                    name: 'Squat + Lower + Intervals',
                    sections: [
                        {
                            title: 'Warm-Up (8-10 min)',
                            exercises: [
                                { name: '3 Rounds', details: 'Goblet Kang Squat √ó 8-10\nDB Side Plank Rotations √ó 8/arm\nBodyweight Split Squat √ó 10/leg' }
                            ]
                        },
                        {
                            title: 'A) Main Lift: Back Squat',
                            isMainLift: true
                        },
                        {
                            title: 'B) Unilateral Lower Body',
                            byWeek: {
                                '1-2': [
                                    { name: '3 Sets', details: '1. Suitcase Split Squat; 20X1; 6/leg; rest 60sec\n2. Single-Leg DB Cross Body RDL; 3010; 6/leg; rest 60sec' }
                                ],
                                '3-4': [
                                    { name: '3 Sets', details: '1. Goblet Loaded Box Step Down; 40X1; 6/leg; rest 60sec\n2. Split Stance DB RDL; 4111; 6/leg; rest 60sec' }
                                ],
                                '5-6': [
                                    { name: '3 Sets', details: '1. DB Suitcase Walking Lunge; 20X0; 12-16 steps; rest 60sec\n2. Death March; 30X0; 6-8/leg; rest 60sec' }
                                ]
                            }
                        },
                        {
                            title: 'C) Posterior Chain + Core',
                            byWeek: {
                                '1-2-3': [
                                    { name: '3 Sets', details: '1. DB Hip Thrust; 20X1; 12-15 reps; rest 45sec\n2. Plank March; 20 reps/arm alternating; rest 45sec' }
                                ],
                                '4-5-6': [
                                    { name: '3 Sets', details: '1. Glute Bridge V Walkouts; 12-15 reps; rest 45sec\n2. RKC Plank; 45-60sec; rest 45sec' }
                                ]
                            }
                        },
                        {
                            title: 'D) Fast Short Run (Intervals)',
                            byWeek: {
                                '1-2': [
                                    { name: 'Warm-up: 10 min easy jog', details: '' },
                                    { name: 'Main Set', details: '6 √ó 400m at 3-5km race pace\nWalk/jog 90sec recovery' },
                                    { name: 'Cool-down: 5-10 min easy jog', details: '' }
                                ],
                                '3-4': [
                                    { name: 'Warm-up: 10 min easy jog', details: '' },
                                    { name: 'Main Set', details: '8 √ó 300m at 3km pace\nWalk/jog 75sec recovery' },
                                    { name: 'Cool-down: 5-10 min easy jog', details: '' }
                                ],
                                '5': [
                                    { name: 'Warm-up: 10 min easy jog', details: '' },
                                    { name: 'Main Set', details: '10 √ó 200m at mile pace\nWalk/jog 60sec recovery' },
                                    { name: 'Cool-down: 5-10 min easy jog', details: '' }
                                ],
                                '6': [
                                    { name: 'Warm-up: 10 min easy jog', details: '' },
                                    { name: 'Main Set (DELOAD)', details: '4 √ó 200m at easy/moderate\nJog 90sec recovery' },
                                    { name: 'Cool-down: 5-10 min easy jog', details: '' }
                                ]
                            }
                        }
                    ]
                },
                2: {
                    name: 'Bench + Upper Body',
                    sections: [
                        {
                            title: 'Warm-Up (8-10 min)',
                            exercises: [
                                { name: '3 Rounds', details: 'Yoga Push Up √ó 8\nProne Snow Angels √ó 10\nScapular Pull Ups √ó 10' }
                            ]
                        },
                        {
                            title: 'A) Main Lift: Bench Press',
                            isMainLift: true
                        },
                        {
                            title: 'B) Upper Push Strength Balance',
                            byWeek: {
                                '1-2': [
                                    { name: '3 Sets', details: '1. Glute Bridge Alt DB Bench; 2020; 10-12; rest 60sec\n2. Single Arm DB Push Press (Ecc Focus); 6-8/arm, 4sec down; rest 60sec' }
                                ],
                                '3-4': [
                                    { name: '3 Sets', details: '1. Incline DB Bench; 31X0; 8-10; rest 60sec\n2. Half Kneeling DB Arnold Press; 21X1; 6-8/arm; rest 60sec' }
                                ],
                                '5-6': [
                                    { name: '3 Sets', details: '1. Single Arm DB Bench; 22X0; 5-7/arm; rest 60sec\n2. Tall Kneeling Alt DB Press; 2111; 8-10/arm; rest 60sec' }
                                ]
                            }
                        },
                        {
                            title: 'C) Upper Pull Strength Balance',
                            byWeek: {
                                '1-2': [
                                    { name: '3 Sets', details: '1. Parallette Plank DB Row; 20X1; 6-8/arm; rest 60sec\n2. Pronated Strict Pull Up; 2011; 8-10; rest 60sec' }
                                ],
                                '3-4': [
                                    { name: '3 Sets', details: '1. DB Tripod Row; 30X1; 6-8/arm; rest 60sec\n2. Mixed Grip Pull Up 2.2.2.2 (wtd if possible); rest 60sec' }
                                ],
                                '5-6': [
                                    { name: '3 Sets', details: '1. Chainsaw Row; 20X2; 8-10/arm; rest 60sec\n2. Wide Grip Strict Pull Up; 31X2; 4-6; rest 60sec' }
                                ]
                            }
                        },
                        {
                            title: 'D) Arm + Shoulder Isolation',
                            byWeek: {
                                '1-2-3': [
                                    { name: '3 Sets', details: '1. Top Down Alt DB Curls; 30X0; 6-8/arm; rest 45sec\n2. Narrow Grip Tricep Push Up; 3011; 8-10; rest 45sec\n3. Single Arm Trap 3 Raise; 10/arm slow; rest 60sec' }
                                ],
                                '4-5-6': [
                                    { name: '3 Sets', details: '1. Hammer Curl; 40X1; 8-10; rest 45sec\n2. DB Skull Crushers; 3010; 8-10; rest 45sec\n3. Bent Over DB Reverse Fly; 20X1; 12; rest 60sec' }
                                ]
                            }
                        }
                    ]
                },
                3: {
                    name: 'Olympic Lifting + Gymnastics',
                    sections: [
                        {
                            title: 'Warm-Up (5 min)',
                            exercises: [
                                { name: 'EMOM √ó 9 min (3 rounds)', details: '1st: Run 30-40sec\n2nd: Dual DB Cuban Press √ó 6-8, 2020\n3rd: Goblet Cossack Squat √ó 4/side, 2111' }
                            ]
                        },
                        {
                            title: 'A) Olympic Lifting (15-20 min)',
                            byWeek: {
                                '1-2': [
                                    { name: 'EMOM √ó 15 min (5 sets)', details: 'Every 3 min:\n1 Power Clean + 1 Front Squat + 1 Push Jerk\n√ó 3 complexes @ 60-65% 1RM Clean' }
                                ],
                                '3-4': [
                                    { name: 'EMOM √ó 18 min (6 sets)', details: 'Every 3 min:\n1 Hang Power Clean + 1 Front Squat + 1 Split Jerk\n√ó 3 complexes @ 65-70% 1RM Clean' }
                                ],
                                '5': [
                                    { name: 'EMOM √ó 18 min (6 sets)', details: 'Every 3 min:\n1 Clean (from floor) + 1 Front Squat + 1 Split Jerk\n√ó 2 complexes @ 70-75% 1RM Clean' }
                                ],
                                '6': [
                                    { name: 'EMOM √ó 12 min (4 sets) - DELOAD', details: 'Every 3 min:\n1 Power Clean + 1 Push Press\n√ó 4 complexes @ 50-60% 1RM Clean' }
                                ]
                            }
                        },
                        {
                            title: 'B) Gymnastics Skill Work (10 min)',
                            byWeek: {
                                '1-2': [
                                    { name: 'EMOM √ó 10 min', details: '1st: 3-5 Strict Toes-to-Bar\n2nd: 3-5 Ring Rows, 31X1\n3rd: 30sec Handstand Hold (wall)\n4th: 3-5 Bench Dips (wtd if possible)\n5th: 2-3 Strict HSPU or negatives (4sec down)' }
                                ],
                                '3-4': [
                                    { name: 'EMOM √ó 10 min', details: '1st: 5-7 Strict Toes-to-Bar\n2nd: 3-5 Chest-to-Ring Rows, 31X1\n3rd: 3-5 Freestanding HS attempts (30sec practice)\n4th: 3-5 Ring Dips (band-assisted if needed)\n5th: 3-5 Strict HSPU (deficit if strong)' }
                                ],
                                '5': [
                                    { name: 'AMRAP 10 min for QUALITY', details: '3 Strict Toes-to-Bar\n3 Strict Chest-to-Bar Pull Ups\n20sec Handstand Hold\n3 Ring Dips\n2 Strict HSPU' }
                                ],
                                '6': [
                                    { name: 'EMOM √ó 10 min - DELOAD', details: '1st: 3 Kipping Toes-to-Bar\n2nd: 5 Ring Rows\n3rd: 30sec Hollow Hold\n4th: 5 Push Ups\n5th: 30sec Plank' }
                                ]
                            }
                        },
                        {
                            title: 'C) Easy Run (Zone 2)',
                            exercises: [
                                { name: '30-45 minutes continuous', details: 'Zone 2 intensity (60-70% max HR)\nConversational pace (nose-breathing)\nPerceived exertion: 3-4 out of 10\n\nWeek 6: Reduce to 20-30 min easy' }
                            ]
                        }
                    ]
                },
                4: {
                    name: 'Deadlift + Posterior Chain',
                    sections: [
                        {
                            title: 'Warm-Up (8-10 min)',
                            exercises: [
                                { name: '3 Rounds', details: 'Goblet Good Morning; 3030; 5 reps\nQuadruped Hip Extensions √ó 10/leg\nScapular Push Ups √ó 10' }
                            ]
                        },
                        {
                            title: 'A) Main Lift: Deadlift',
                            isMainLift: true
                        },
                        {
                            title: 'B) Secondary Hinge + Glute',
                            byWeek: {
                                '1-2': [
                                    { name: '3 Sets', details: '1. DB Romanian Deadlift; 3131; 8-10; rest 60sec\n2. B Stance DB Hip Thrust; 3110; 8-10/leg; rest 60sec' }
                                ],
                                '3-4': [
                                    { name: '3 Sets', details: '1. Single Leg DB RDL; 31X1; 6-8/leg; rest 60sec\n2. Feet Elevated DB Glute Bridge; 10X0; 20 reps; rest 60sec' }
                                ],
                                '5-6': [
                                    { name: '3 Sets', details: '1. Deficit Deadlift (2" plate); 3010; 5-6; rest 60sec\n2. Glute Loop DB Hip Thrust; 20X2; 10-12; rest 60sec' }
                                ]
                            }
                        },
                        {
                            title: 'C) Back Strength + Core',
                            byWeek: {
                                '1-2': [
                                    { name: '3 Sets', details: '1. Dual DB Prone Row; 11X2; 8-10; rest 45sec\n2. Weighted Back Extension; 3010; 12-15; rest 45sec\n3. Hamstring Plank; 30sec; rest 60sec' }
                                ],
                                '3-4': [
                                    { name: '3 Sets', details: '1. DB Bent Over Row; 30X1; 10-12; rest 45sec\n2. Weighted Back Extension; 3110; 10-12; rest 45sec\n3. Extended Reverse Plank Bridge; 30-45sec; rest 60sec' }
                                ],
                                '5-6': [
                                    { name: '3 Sets', details: '1. DB Gorilla Rows; 20X1; 12 alt; rest 45sec\n2. Weighted Back Extension (heavier); 3010; 8-10; rest 45sec\n3. Hollow Body Hold; 30-45sec; rest 60sec' }
                                ]
                            }
                        },
                        {
                            title: 'D) Heavy Carries',
                            exercises: [
                                { name: '2-3 Sets', details: '1. Farmer\'s Walk; 40m heavy; rest 60sec\n2. Single Arm DB OH Carry; 20m/arm; rest 90sec' }
                            ]
                        }
                    ]
                },
                5: {
                    name: 'Long Steady Run',
                    sections: [
                        {
                            title: 'Warm-Up',
                            exercises: [
                                { name: '10 minutes', details: 'Easy jogging + dynamic stretches\n(leg swings, walking lunges)' }
                            ]
                        },
                        {
                            title: 'Main Run',
                            byWeek: {
                                '1-2': [
                                    { name: '60 minutes steady run', details: 'Intensity: High Zone 3 (75-80% max HR)\n"Comfortably hard" but sustainable\nConsistent pace throughout' }
                                ],
                                '3-4': [
                                    { name: '75 minutes steady run', details: 'Intensity: High Z3 to low Z4 (78-82% max HR)\nSlightly harder than Weeks 1-2\nEven pacing; resist urge to surge' }
                                ],
                                '5': [
                                    { name: '80-90 minutes steady run', details: 'Intensity: Low-mid Zone 4 (80-85% max HR)\nPeak endurance session of block\nMaintain consistent effort\nLast 15 min challenging but controlled' }
                                ],
                                '6': [
                                    { name: '40-45 minutes easy run - DELOAD', details: 'Zone 2 intensity (60-70% max HR)\nRecovery pace only' }
                                ]
                            }
                        },
                        {
                            title: 'Cool-Down',
                            exercises: [
                                { name: '5-10 minutes', details: 'Easy jog + static stretching\n(hip flexors, quads, hamstrings, calves)' }
                            ]
                        }
                    ]
                },
                6: {
                    name: 'REST DAY',
                    isRest: true,
                    description: 'Complete rest, light stretching/mobility, or 20-30 min easy walk'
                },
                7: {
                    name: 'REST DAY',
                    isRest: true,
                    description: 'Optional very light activity (easy swim, yoga, foam rolling) or full rest'
                }
            }
        };

        let currentWeek = 1;
        let currentDay = 1;
        let touchStartX = 0;
        let touchEndX = 0;
        let completedWorkouts = JSON.parse(localStorage.getItem('completedWorkouts') || '{}');

        function init() {
            renderWeekIndicator();
            renderDaySelector();
            renderContent();
            initSwipeGestures();
            initProgramUpload();
            loadCompletedWorkouts();
        }

        function renderWeekIndicator() {
            const indicator = document.getElementById('weekIndicator');
            const weekData = programData.weeks[currentWeek - 1];
            indicator.textContent = `Week ${currentWeek} - ${weekData.focus}`;
        }

        function toggleUploadModal() {
            const modal = document.getElementById('uploadModal');
            modal.classList.toggle('active');
        }

        function initSwipeGestures() {
            const header = document.querySelector('.header');
            
            header.addEventListener('touchstart', (e) => {
                touchStartX = e.changedTouches[0].screenX;
            }, { passive: true });
            
            header.addEventListener('touchend', (e) => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, { passive: true });
        }

        function handleSwipe() {
            const swipeDistance = touchStartX - touchEndX;
            const minSwipeDistance = 50;
            
            if (Math.abs(swipeDistance) > minSwipeDistance) {
                if (swipeDistance > 0 && currentWeek < 6) {
                    selectWeek(currentWeek + 1);
                } else if (swipeDistance < 0 && currentWeek > 1) {
                    selectWeek(currentWeek - 1);
                }
            }
        }

        function initProgramUpload() {
            const uploadInput = document.getElementById('programUpload');
            uploadInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        try {
                            const newProgram = JSON.parse(event.target.result);
                            if (newProgram.weeks && newProgram.days) {
                                Object.assign(programData, newProgram);
                                currentWeek = 1;
                                currentDay = 1;
                                init();
                                alert('‚úÖ Program loaded successfully!');
                            } else {
                                alert('‚ùå Invalid program format. Please check the JSON structure.');
                            }
                        } catch (error) {
                            alert('‚ùå Error loading program: ' + error.message);
                        }
                    };
                    reader.readAsText(file);
                }
            });
        }

        function loadCompletedWorkouts() {
            completedWorkouts = JSON.parse(localStorage.getItem('completedWorkouts') || '{}');
        }

        function isWorkoutCompleted(week, day) {
            return completedWorkouts[`w${week}d${day}`] === true;
        }

        function toggleWorkoutComplete(week, day) {
            const key = `w${week}d${day}`;
            completedWorkouts[key] = !completedWorkouts[key];
            localStorage.setItem('completedWorkouts', JSON.stringify(completedWorkouts));
            renderDaySelector();
            renderContent();
        }

        function getDayIcon(dayNum) {
            const icons = {
                1: 'ü¶µ',  // Legs
                2: 'üí™',  // Flexing muscle
                3: 'üèãÔ∏è',  // Lifting
                4: 'üèãÔ∏è‚Äç‚ôÄÔ∏è',  // Dumbbell
                5: 'üèÉ',  // Running
                6: 'üí§',  // zzz
                7: 'üßò'   // Stretching
            };
            return icons[dayNum] || '';
        }

        function renderDaySelector() {
            const container = document.getElementById('daySelector');
            
            // Sort days: incomplete first, then completed
            const dayNumbers = Object.keys(programData.days);
            const sortedDays = dayNumbers.sort((a, b) => {
                const aCompleted = isWorkoutCompleted(currentWeek, parseInt(a));
                const bCompleted = isWorkoutCompleted(currentWeek, parseInt(b));
                
                // If completion status is different, incomplete comes first
                if (aCompleted !== bCompleted) {
                    return aCompleted ? 1 : -1;
                }
                // If same completion status, maintain original order
                return parseInt(a) - parseInt(b);
            });
            
            container.innerHTML = sortedDays.map(day => {
                const completed = isWorkoutCompleted(currentWeek, parseInt(day));
                const icon = getDayIcon(parseInt(day));
                return `<button class="day-btn ${parseInt(day) === currentDay ? 'active' : ''} ${completed ? 'completed' : ''}" 
                         onclick="selectDay(${day})">
                    ${icon} Day ${day}
                </button>`;
            }).join('');
        }

        function selectWeek(weekNum) {
            currentWeek = weekNum;
            renderWeekIndicator();
            renderDaySelector();
            renderContent();
        }

        function selectDay(dayNum) {
            currentDay = parseInt(dayNum);
            renderDaySelector();
            renderContent();
        }

        function getWeekRange(week) {
            if (week <= 2) return '1-2';
            if (week <= 4) return '3-4';
            if (week === 5) return '5';
            return '6';
        }

        function getWeekRangeExtended(week) {
            if (week <= 3) return '1-2-3';
            return '4-5-6';
        }

        function renderContent() {
            const container = document.getElementById('content');
            const dayData = programData.days[currentDay];
            const weekData = programData.weeks[currentWeek - 1];

            if (dayData.isRest) {
                container.innerHTML = `
                    <div class="rest-day">
                        <h2>üõå ${dayData.name}</h2>
                        <p style="color: var(--color-text-secondary); margin-top: 1rem;">
                            ${dayData.description}
                        </p>
                    </div>
                `;
                return;
            }

            let html = `<h1 style="margin-bottom: 1rem; color: var(--color-accent);">
                Day ${currentDay}: ${dayData.name}
            </h1>`;

            html += `<div class="tempo-note">
                <strong>Week ${currentWeek} Focus:</strong> ${weekData.focus}<br>
                <strong>Tempo Notation:</strong> 4 digits = eccentric-pause-concentric-pause<br>
                Example: 3010 = 3sec down, 0 pause, 1sec up, 0 pause<br>
                Example: 20X1 = 2sec down, 0 pause, explode up, 1sec pause
            </div>`;

            dayData.sections.forEach(section => {
                html += `<div class="workout-section">
                    <h2>${section.title}</h2>`;

                if (section.isMainLift) {
                    const liftName = section.title.includes('Squat') ? 'Back Squat' : 
                                   section.title.includes('Bench') ? 'Bench Press' : 'Deadlift';
                    html += `<table class="main-lift-table">
                        <tr>
                            <th>Load</th>
                            <th>Sets √ó Reps</th>
                            <th>Tempo</th>
                            <th>Rest</th>
                        </tr>
                        <tr class="highlight">
                            <td>${weekData.load}</td>
                            <td>${weekData.sets}</td>
                            <td>${weekData.tempo}</td>
                            <td>${weekData.rest}</td>
                        </tr>
                    </table>`;
                } else if (section.byWeek) {
                    const weekRange = getWeekRange(currentWeek);
                    const weekRangeExt = getWeekRangeExtended(currentWeek);
                    
                    let exercises = section.byWeek[weekRange] || 
                                  section.byWeek[weekRangeExt] || 
                                  section.byWeek['1-2-3'] || 
                                  section.byWeek['4-5-6'] || 
                                  section.byWeek['1-2'] || 
                                  section.byWeek['5'] ||
                                  section.byWeek['6'];

                    if (exercises) {
                        exercises.forEach(ex => {
                            html += `<div class="exercise-item">
                                <div class="exercise-header">${ex.name}</div>
                                <div class="exercise-details">${ex.details.replace(/\n/g, '<br>')}</div>
                            </div>`;
                        });
                    }
                } else if (section.exercises) {
                    section.exercises.forEach(ex => {
                        html += `<div class="exercise-item">
                            <div class="exercise-header">${ex.name}</div>
                            <div class="exercise-details">${ex.details.replace(/\n/g, '<br>')}</div>
                        </div>`;
                    });
                }

                html += `</div>`;
            });

            container.innerHTML = html;
            
            const completed = isWorkoutCompleted(currentWeek, currentDay);
            if (!dayData.isRest) {
                html = `<button class="complete-workout-btn ${completed ? 'completed' : ''}" 
                                onclick="toggleWorkoutComplete(${currentWeek}, ${currentDay})">
                            <span style="font-size: 1.2rem;">${completed ? '‚úì' : '‚òê'}</span>
                            ${completed ? 'Workout Completed' : 'Mark as Complete'}
                        </button>`;
                container.innerHTML += html;
            }
        }

        // Immediate initialization
        init();
        
        // Backup initialization on DOMContentLoaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded');
            const weekSelector = document.getElementById('weekSelector');
            if (!weekSelector || !weekSelector.innerHTML) {
                console.log('Initializing on DOMContentLoaded');
                init();
            }
        });
        
        // Final backup on window load
        window.addEventListener('load', function() {
            console.log('Window loaded');
            const weekSelector = document.getElementById('weekSelector');
            if (!weekSelector || !weekSelector.innerHTML) {
                console.log('Initializing on window load');
                init();
            }
        });
        
        // iOS Safari specific fix - pageshow event
        window.addEventListener('pageshow', function(event) {
            console.log('Page show event');
            const weekSelector = document.getElementById('weekSelector');
            if (!weekSelector || !weekSelector.innerHTML) {
                console.log('Initializing on pageshow');
                init();
            }
        });
    </script>
</body>
</html
